<%- include('partials/header') %>
<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="jquery.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
        integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
        integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">

    <style>
        .card {
            float: left;
            margin: 10px 20px;
            height: 300px;
        }

        .card-body {
            border-left: 4px solid yellow;
            border-right: 4px solid yellow;
        }

        .card-price {
            font-size: 23px;
            font-weight: bolder;
        }

        .card-title {
            color: gray;
        }

        .card-location {
            color: #000;
            font-size: 13px;
            display: block;
            position: relative;
            bottom: 0px;
        }

        .sell {
            float: right;
            margin: 10px;
            padding: 10px;
        }

        .sell-item {
            width: 100px;
            padding: 10px;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-dark">
        <a class="text-warning" href="#"><strong>CollegeAdda</strong></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Profile</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Category
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">Mobile</a>
                        <a class="dropdown-item" href="#">Books</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Others</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>
    <div class="sell">
        <a class="btn btn-light btn-lg" href="/logout" role="button">Log Out</a>
        <button class="sell-item btn btn-primary" onclick="sellProduct()">SELL</button>
    </div>
    <div class="container">
        <div class="products"></div>
    </div>
    <script>

        function sellProduct() {
            window.location = 'http://localhost:3000/post';
        }

        $.get('http://localhost:3000/getProducts', function (data, status) {
            details = data;
            data.forEach((prod_detail, i) => {
                $('.products').append(`<div class="card" style="width: 18rem;">
                    <img class="card-img-top m-auto" style="padding:8px 30px ; height: 150px;: 20px;display: block;" src="./uploads/${prod_detail.image[0]}" alt="Product image">
                    <div class="card-body">
                        <span class="card-text card-price">â‚¹ ${prod_detail.price}</span>
                        <p class="card-text prod-title">${prod_detail.title}</p>
                        <span class="card-text card-location">${prod_detail.college_name}</span>
                    </div>
                </div>`);
            });
        });

        setTimeout(function () {
            $('.card').on('click', function () {
                const title = $(this).find('.prod-title').text();

                window.location.href = '/items/' + title;
            });
        }, 2000);

    </script>
</body>

</html>
<%- include('partials/header') %>
